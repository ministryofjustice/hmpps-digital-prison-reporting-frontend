{% from "moj/components/button-menu/macro.njk" import mojButtonMenu %}

{% macro dprReportActions(buttonList) %}

  {% set items = [] %}

    {% for button in buttonList %}
      {% set items = (items.push({
        text: button.tooltipText,
        attributes: {
          id: button.id,
          disabled: button.disabled,
          "data-href": button.href
        },
        attributes: {
          id: button.id,
          disabled: button.disabled,
          "data-href": button.href,
          "aria-label": button.ariaLabelText,
          "data-id": button.attributes.id, 
          "data-report-id": button.attributes.reportId, 
          "data-csrf-token": button.attributes.csrfToken,
          "data-table-id": button.attributes.tableId,
          "data-type": button.attributes.type
        } if button.disabled else {
          id: button.id,
          "data-href": button.href,
          "aria-label": button.ariaLabelText,
          "data-id": button.attributes.id, 
          "data-report-id": button.attributes.reportId, 
          "data-csrf-token": button.attributes.csrfToken,
          "data-table-id": button.attributes.tableId,
          "data-type": button.attributes.type
        },
        classes: '{{button.id}} govuk-button--secondary'
        }), items) %}
    {% endfor %}

  
  <div class="report-actions" data-dpr-module='report-actions'>
    {{ mojButtonMenu({
      items: items
    }) }}
  </div>
{% endmacro %}
